import{a,I as f,_ as j,b as y,u as v,j as e,C as w,P as S,B as d,R as z,c as C}from"./index-DrQQ5ErI.js";import{F as E,i as L,T as l}from"./error-CthvLBzb.js";import{g as P,R,d as $}from"./goods-DDaD7Hkp.js";import{S as T}from"./index-yP4FQ8gW.js";var B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},N=function(n,r){return a.createElement(f,j({},n,{ref:r,icon:B}))},b=a.forwardRef(N);const F=()=>{const o=y(),n={1:e.jsx(l,{color:"warning",children:"下架"}),2:e.jsx(l,{color:"success",children:"在售"})},r={1:"唱片",2:"衣饰",3:"日用品",4:"其它",5:"特价"},u=[{title:"id",dataIndex:"id"},{title:"封面",dataIndex:"images",width:100,render:t=>e.jsx("img",{src:`http://8.134.124.55:80/post/uploads/${t[0]}`||L,width:60,height:60,alt:""})},{title:"名称",dataIndex:"goodsName",width:300},{title:"状态",dataIndex:"status",render:t=>n[t]},{title:"类别",dataIndex:"type",render:t=>r[t]},{title:"价格",dataIndex:"price"},{title:"销量",dataIndex:"sales"},{title:"浏览量",dataIndex:"view"},{title:"库存",dataIndex:"amount"},{title:"操作",width:200,render:t=>e.jsxs(T,{size:"middle",children:[e.jsx(S,{content:"查看订单",placement:"top",children:e.jsx(d,{type:"primary",shape:"circle",icon:e.jsx(z,{}),onClick:()=>o(`/layout/order?goodsId=${t.id}`)})}),e.jsx(d,{type:"primary",shape:"circle",icon:e.jsx(b,{}),onClick:()=>o(`/layout/edit?id=${t.id}`)}),e.jsx(C,{title:"删除商品",description:"确认要删除该商品吗?",onConfirm:()=>I(t),okText:"Yes",cancelText:"No",children:e.jsx(d,{type:"primary",danger:!0,shape:"circle",icon:e.jsx(R,{})})})]})}],[p,m]=a.useState([]),[x,g]=a.useState(0),c=v(t=>t.user.userInfo.id),[s,h]=a.useState({role:2,sellerId:c,pageSize:10,pageNum:1});a.useEffect(()=>{async function t(){const i=await P(s);m(i.data.list),g(i.data.total)}t()},[s]);const I=async t=>{const i={id:t.id,sellerId:c};await $(i),h({...s})};return e.jsx("div",{children:e.jsx(w,{title:"商品列表",style:{marginBottom:20},children:e.jsx(E,{rowKey:"id",columns:u,dataSource:p,pagination:{total:x,pageSize:s.pageSize}})})})};export{F as default};
